# XIAO MG24 / MG24 Sense Reference

**Chipset**: MGM240 (EFR32MG24 ARM Cortex-M33 78MHz)
**Wireless**: Matter, Zigbee, Thread, BLE
**Flash**: 1024KB
**RAM**: 512KB

## Pin Definitions

| Pin | Chip Pin | Arduino | Functions | Notes |
|-----|----------|---------|-----------|-------|
| D0 | PC00 | D0 | ADC | Analog input |
| D1 | PC01 | D1 | ADC | Analog input |
| D2 | PC02 | D2 | ADC | Analog input |
| D3 | PC03 | D3 | ADC, SPI | Analog input |
| D4 | PC04 | D4 | I2C SDA | Default I2C SDA (XIAO standard) |
| D5 | PC05 | D5 | I2C SCL | Default I2C SCL (XIAO standard) |
| D6 | PC06 | D6 | UART TX | Default UART TX (XIAO standard) |
| D7 | PC07 | D7 | UART RX | Default UART RX (XIAO standard) |
| D8 | PA03 | D8 | SPI SCK | Default SPI SCK (XIAO standard) |
| D9 | PA04 | D9 | SPI MISO | Default SPI MISO (XIAO standard) |
| D10 | PA05 | D10 | SPI MOSI | Default SPI MOSI (XIAO standard) |
| D11 | PA09 | D11 | UART RX | SAMD11_TX |
| D12 | PA08 | D12 | UART TX | SAMD11_RX |
| D13 | PB02 | D13 | I2C SCL | Secondary I2C |
| D14 | PB03 | D14 | I2C SDA | Secondary I2C |
| D15 | PB00 | D15 | SPI MOSI | Secondary SPI |
| D16 | PB01 | D16 | SPI MISO | Secondary SPI |
| D17 | PA00 | D17 | SPI SCK | Secondary SPI |
| D18 | PD02 | D18 | CS | SPI CS |

Other key pins (from Seeed Ref pin map):

| Pin | Chip Pin | Arduino | Functions | Notes |
|-----|----------|---------|-----------|-------|
| ADC_BAT | PD04 | - | ADC | Read the BAT voltage value |
| RF Switch Port Select | PB04 | - | GPIO | Switch onboard antenna and the UFL antenna |
| RF Switch Power | PB05 | - | GPIO | RF Power |
| Reset | RESET | - | Reset | RESET |
| CHARGE_LED | VBUS | - | LED | CHG-LED_Red |
| USER_LED | PA07 | LED_BUILTIN | LED | User Light |

## XIAO Standard Peripheral Mapping

All XIAO boards follow a unified peripheral pin mapping for expansion board compatibility:

| Interface | Pin | Chip Pin |
|-----------|-----|----------|
| **I2C SDA** | D4 | PC04 |
| **I2C SCL** | D5 | PC05 |
| **UART TX** | D6 | PC06 |
| **UART RX** | D7 | PC07 |
| **SPI SCK** | D8 | PA03 |
| **SPI MISO** | D9 | PA04 |
| **SPI MOSI** | D10 | PA05 |

## Secondary I2C and SPI

| Interface | Pin | Chip Pin |
|-----------|-----|----------|
| **I2C2 SDA** | D14 | PB03 |
| **I2C2 SCL** | D13 | PB02 |
| **SPI2 SCK** | D17 | PA00 |
| **SPI2 MISO** | D16 | PB01 |
| **SPI2 MOSI** | D15 | PB00 |
| **SPI2 CS** | D18 | PD02 |

## ADC

- All pins have ADC capability
- 12-bit resolution (0-4095)
- Range: 0-3.3V

## MG24 Sense Onboard Peripherals

The MG24 Sense version includes additional onboard sensors for IoT and smart home applications.

### 6-Axis IMU (LSM6DS3TR-C)

Built-in 6-axis inertial measurement unit with 3-axis accelerometer and 3-axis gyroscope.

| IMU Interface | XIAO Pin | Chip Pin | Notes |
|---------------|----------|----------|-------|
| I2C SDA | D4 | PC04 | Default I2C SDA |
| I2C SCL | D5 | PC05 | Default I2C SCL |
| I2C Address | - | 0x6A | LSM6DS3TR-C address |
| IMU Enable | - | PD5 | Must set HIGH to enable IMU |

**Sensor**: LSM6DS3TR-C (STMicroelectronics)

**Important**: PD5 must be set HIGH to enable IMU power before use

**For Arduino usage**: See `/xiao-arduino` - `api/imu-sensor.md` for complete API reference

**Key Features**:
- Accelerometer range: ±2/±4/±8/±16 g
- Gyroscope range: ±125/±245/±500/±1000/±2000 dps
- FIFO buffer for data logging
- Motion interrupt detection
- Low power consumption

### Analog Microphone (MSM381ACT001)

Built-in MEMS analog microphone with I2S output for audio capture.

| Microphone Signal | XIAO Pin | Chip Pin | Notes |
|-------------------|----------|----------|-------|
| MIC DATA | - | PC9 | Microphone data input |
| MIC PWR | - | PC8 | Microphone power enable |

**Sensor**: MSM381ACT001 (MEMS microphone)

**Interface**: Analog with I2S output

**For Arduino usage**: See `/xiao-arduino` - `api/microphone.md` for complete API reference

**Key Features**:
- High sensitivity MEMS microphone
- Wide frequency response: 20 Hz - 20 kHz
- Sample rate: up to 16 kHz
- Digital I2S output
- Low noise, high SNR

## Sense Model Summary

| Feature | Details |
|---------|---------|
| IMU | 6-axis LSM6DS3TR-C (accel + gyro) on I2C, requires PD5 HIGH |
| Microphone | MEMS analog microphone (MSM381ACT001) on PC9/PC8 |

## Power

- **Input**: 5V via USB
- **Operating Voltage**: 3.3V
- **Active**: ~10mA (BLE radio on)
- **Sleep**: ~1µA (EM4)

## Important Notes

- Built-in SAMD11 for USB-serial debugging
- Matter support for smart home
- Low power consumption
- IMU requires PD5 HIGH to enable

## Platform Support

| Platform | Support |
|----------|---------|
| Arduino | ✅ Full support |
| MicroPython | ✅ Full support |
| ESPHome | ❌ Not supported |

For platform-specific usage:
- **Arduino**: See `/xiao-arduino` skill
- **MicroPython**: See `/xiao-micropython` skill
