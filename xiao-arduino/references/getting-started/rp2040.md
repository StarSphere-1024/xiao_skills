# XIAO RP2040 Arduino Getting Started

## Board Manager Setup

1. Open Arduino IDE 2.x
2. Add to "Additional Boards Manager URLs":
   ```cpp
   https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json
   ```
3. Install "Raspberry Pi Pico/RP2040" by Earle Philhower
4. Select: **Tools > Board > Raspberry Pi Pico**

## Bootloader Mode

1. Hold **BOOTSEL** button
2. Connect USB (or press RESET while holding BOOTSEL)
3. RPI-RP2 drive appears
4. Copy `.uf2` file to the drive

## Pin Mapping

| Pin | GPIO | Arduino | Function | Notes |
|-----|------|---------|----------|-------|
| D0 | GPIO26 | D0 | ADC0, SPI1_SCK | - |
| D1 | GPIO27 | D1 | ADC1, SPI1_MISO | - |
| D2 | GPIO28 | D1 | ADC2, SPI1_CS | - |
| D3 | GPIO29 | D3 | ADC3, SPI1_RX | - |
| D4 | GPIO6 | D4 | PWM3A, SPI0_SCK | - |
| D5 | GPIO7 | D5 | PWM3B, SPI0_TX | - |
| D6 | GPIO0 | D6 | PWM0A, SPI0_RX, TX0 | - |
| D7 | GPIO1 | D7 | PWM0B, SPI0_CS, RX0 | - |
| D8 | GPIO2 | D8 | PWM1A, SPI0_SCK | - |
| D9 | GPIO4 | D9 | PWM2A, SPI0_RX | - |
| D10 | GPIO3 | D10 | PWM1B, SPI0_TX | - |

## I2C

```cpp
#include <Wire.h>

// Default I2C: GPIO16 (SDA), GPIO17 (SCL)
// Or use custom pins:
Wire.setSDA(16);
Wire.setSCL(17);
Wire.begin();

void setup() {
    Wire.begin();
}

void loop() {}
```

## SPI

```cpp
#include <SPI.h>

void setup() {
    SPI.begin();
    // Default: SCK=GPIO18, MOSI=GPIO19, MISO=GPIO16
    // But XIAO uses: SCK=D2(GPI28), MISO=D1(GPI27), MOSI=D0(GPI26)
}

void loop() {
    byte data = SPI.transfer(0x00);
}
```

## UART

```cpp
// Serial0 (USB)
Serial.begin(115200);

// Serial1 (on pins)
Serial1.begin(115200, SERIAL_8N1, 7, 6);  // RX=D7, TX=D6
```

## First Sketch

```cpp
void setup() {
    Serial.begin(115200);
    pinMode(D10, OUTPUT);
}

void loop() {
    Serial.println("Hello XIAO RP2040!");
    digitalWrite(D10, !digitalRead(D10));
    delay(1000);
}
```

## PWM

```cpp
const int pwmPin = D10;

void setup() {
    analogWriteFreq(1000);    // 1kHz
    analogWriteRange(255);    // 8-bit
    analogWrite(pwmPin, 128);  // 50% duty
}
```

## ADC

```cpp
const int adcPin = A0;

void setup() {
    analogReadResolution(12);  // 12-bit (0-4095)
}

void loop() {
    int value = analogRead(adcPin);
    float voltage = value * 3.3 / 4095.0;
    Serial.println(voltage);
    delay(1000);
}
```

## Multiple I2C

```cpp
#include <Wire.h>

TwoWire I2C0 = TwoWire(0);
TwoWire I2C1 = TwoWire(1);

void setup() {
    I2C0.setSDA(0);
    I2C0.setSCL(1);
    I2C0.begin();

    I2C1.setSDA(2);
    I2C1.setSCL(3);
    I2C1.begin();
}
```

## Watchdog Timer

```cpp
#include "hardware/watchdog.h"

void setup() {
    Serial.begin(115200);
    watchdog_enable(4000);  // 4 second timeout
}

void loop() {
    watchdog_update();
    delay(1000);
}
```

## Boot Button

```cpp
const int BOOT_PIN = 25;  // Not exposed on XIAO
// Use D10 or other pins for buttons
```

## Troubleshooting

### Can't upload

1. Hold BOOTSEL while connecting USB
2. Check RPI-RP2 drive appears
3. Copy .uf2 file

### Wrong pin numbers

XIAO RP2040 uses different pin mapping than Raspberry Pi Pico. Use D0-D10 labels.

### I2C not working

Check GPIO16 (SDA) and GPIO17 (SCL) - these are the default I2C pins on RP2040.
